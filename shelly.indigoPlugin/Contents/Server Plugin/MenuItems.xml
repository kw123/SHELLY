<?xml version="1.0"?>
<MenuItems>
      <MenuItem id="d00"> 
      <Name>BASIC setup HELP</Name>
        <ConfigUI>
        <Field   id="label0" type="label">
            <Label> This plugin integrates Shelly wifi devices into Indigo.

No other software is needed. The plugin can read the device status 
and can send commands to them, like relay on/off, light up, red=50%..
As soon as the shelly devices are properly configured the plugin will 
recognize them and add appropriate indigo devices, ready to be used

To START,  here the basic steps:

0. Setup indigo config.. set indigIP#, port, curl or python connect 
   shelly device userid/passwd if set, etc

1.  Setup shelly device:
    using phone connect wifi to shelly device wifi SSID in setup
       use browser to connect to 192.168.33.1 (that is a fixed ip#)
       setup your home wifi network parameter. I prefer using a fixed ip
    restart; on regular browser, connect to http://ip#
   upgrade device if available
   add action: http://indigoIP:port/anyTextYouLike to the action fields
   switch eg relay on/off
   that should create a new device in indigo

2.  To add more devices enter IP# in "start shelly discovery process 
    for 1 or range of devices" that should create the new 
    shelly devices in indigo if not created by step 1

3. If not done in #1 in the shelly devices (http://ip#) add 
     action url http://indigoIP:port#/abcxyz on ALL shelly devices
    That makes things faster, the device will send any changes to indigo, 
    where the plugin is listening on the given port
    This is highly recommened for battery devices that go to sleep 
    and only wake up when sensors change (temp, hum, flood)

4. if needed edit indigo shelly device to tune parameters 
   expiration time, polling, status column.. 

How it works:
The plugin is (A) listening to any messages from the devices (on port from config) 
   and (B) polling the devices on a regular schedule 
     (1/sec .. minutes, set in dev edit)
Using  commands http://ip#/settings --&gt; we get basic config parameters (rssi,etc)  
     and ip#/status --&gt; we get live info on devices, temp, on/off RGB, Power ...
     set relay on/off --&gt; /relay/0?turn=on  /relay/0?turn=off
     set RGB values -- &gt;  /color/0?red=200&amp;green=50&amp;blue=30
etc.

Currently supported devices:
Shelly-1:                          one basic relay
Shelly-1PM:                        relay with temp sensor and overload protection
Shelly-25 2-Relay:                 like two Shelly-1PM in one
Shelly-Power 2 Channels - 1 Relay: measures Power, voltage and has 1 relay
Shelly-RGBW Light Bulb:          110-220V light bulb with 4 led
Shelly-RGBW dimmer:                4 led dimmer  for red, blue, green and white
Shelly-Dimmer:                     110-222V dimmer
Shelly-1 Temp-Hum:                 battery / usb powered Temp. and Hum. sensor
Shelly-Flood-Temp:                 Flood alarm and Temperature sensor
Shelly- external temp addon:       extention for shell-1 -PM to allow connection 
                                   of up to 3 onewire Temp sensors

Coming up: 
Shelly Door Window                 Door/window open alarm
Shelly Button                      simple button 
Shelly Bulb                        110-220V LED
Shelly Vintage A60                 110-220V LED
Shelly Duo                         110-220V LED
</Label>
        </Field>
        </ConfigUI>
    </MenuItem>         

    <MenuItem id="d03"> <Name>-------------setup Shelly device  ---------------------------</Name><CallbackMethod>inpDummy</CallbackMethod></MenuItem>

    <MenuItem id="setipNumberToAdd">
        <Name>Start Shelly device discovery Process for ONE device</Name>
        <ConfigUI>
            <Field id="infoLabel11" type="label">
                <Label>Initial setup of device, give IP number and click confirm </Label>
            </Field>
            <Field id="ipNumber"   type="textfield" defaultValue="192.168.1.x"  >
                <Label>ipNumber:</Label> 
            </Field>
            <Field   id="confirmIpNumberSetup" type="button"  >
                <Label>Confirm </Label><Title>CONFIRM</Title> <CallbackMethod>buttonConfirmconfirmIpNumberSetupCALLBACK</CallbackMethod>
            </Field>
            <Field    id="MSG"   type="textfield" defaultValue="" >
                <Label> message from Plugin:</Label>
            </Field>
        </ConfigUI>
    </MenuItem>  

    <MenuItem id="setipNumberRangeToAdd">
        <Name>Start Shelly device discovery Process for an IP RANGE</Name>
        <ConfigUI>
            <Field id="infoLabel11" type="label">
                <Label>Initial setup of device, give an ip number range IP  and the plugin will try to contact each. If it is a shelly device and does not exist yet, it will create one</Label>
            </Field>
            <Field id="ipNumberFrom"   type="textfield" defaultValue="192.168.1.x"  >
                <Label>ipNumber from :</Label> 
            </Field>
            <Field id="ipNumberTo"   type="textfield" defaultValue="192.168.1.y"  >
                <Label>ipNumber to:</Label> 
            </Field>
            <Field   id="confirmIpNumberSetup" type="button"  >
                <Label>Confirm </Label><Title>CONFIRM</Title> <CallbackMethod>buttonConfirmconfirmIpNumberRangeSetupCALLBACK</CallbackMethod>
            </Field>
            <Field    id="MSG"   type="textfield" defaultValue="" >
                <Label> message from Plugin:</Label>
            </Field>
        </ConfigUI>
    </MenuItem>         
      <MenuItem id="d04"> <Name>------------- INFO ---------------------------</Name><CallbackMethod>inpDummy</CallbackMethod></MenuItem>
      <MenuItem id="printShellyDevs"> <Name>Print dev info to logfile</Name><CallbackMethod>buttonPrintShellyDevInfoCALLBACK</CallbackMethod></MenuItem>
</MenuItems>
